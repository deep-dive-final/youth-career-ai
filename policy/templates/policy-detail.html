{% load static %}

<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì •ì±… ìƒì„¸ - ì •ì±… ì¶”ì²œ ì„œë¹„ìŠ¤</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header-top">
          <button class="btn-icon" onclick="history.back()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="19" y1="12" x2="5" y2="12"></line>
              <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
          </button>
          <h2 style="margin: 0">ì •ì±… ìƒì„¸</h2>
          <button id="saveBtn" class="btn-icon">
            <svg
              id="saveIcon"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
            </svg>
          </button>
        </div>
      </div>

      <div id="policyContent" style="padding: 0 20px 100px">
        {% if policy %}
        <div
          style="
            background: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 16px;
          "
        >
          <div style="display: flex; gap: 8px; margin-bottom: 12px">
            <span
              style="
                padding: 4px 12px;
                background: linear-gradient(to right, #a8e6cf, #7ec4cf);
                color: white;
                border-radius: 50px;
                font-size: 12px;
              "
            >
              {{ policy.category }}
            </span>
          </div>
          <h1 style="font-size: 24px; color: #2d3748; margin-bottom: 12px">
            {{ policy.policy_name }}
          </h1>
          <p style="font-size: 14px; color: #a0aec0">
            ì¡°íšŒìˆ˜: {{ policy.view_count }}
          </p>
        </div>

        <div
          style="
            background: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 16px;
          "
        >
          <h3 style="font-size: 16px; color: #2d3748; margin-bottom: 12px">
            âœ… ì‹ ì²­ ìê²©
          </h3>
          <div style="color: #7a8a9e; font-size: 14px; line-height: 1.8">
            <p style="margin-bottom: 8px">
              <strong>ëŒ€ìƒ:</strong> {{ policy.eligibility.target }}
            </p>
            <p style="margin: 0">
              <strong>ê¸°íƒ€ ì¡°ê±´:</strong> {{ policy.eligibility.other }}
            </p>
          </div>
        </div>

        <div
          style="
            background: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 16px;
          "
        >
          <h3 style="font-size: 16px; color: #2d3748; margin-bottom: 12px">
            ğŸ“„ í•„ìš” ì„œë¥˜
          </h3>
          <ul
            style="
              color: #7a8a9e;
              font-size: 14px;
              line-height: 1.8;
              padding-left: 20px;
              margin: 0;
            "
          >
            {% for doc in policy.required_document %}
            <li>{{ doc }}</li>
            {% empty %}
            <li>ìƒì„¸ í˜ì´ì§€ í˜¹ì€ ê³µì‹ í™ˆí˜ì´ì§€ë¥¼ í†µí•´ í™•ì¸í•´ ì£¼ì„¸ìš”.</li>
            {% endfor %}
          </ul>
        </div>

        <div
          style="
            background: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 16px;
          "
        >
          <h3 style="font-size: 16px; color: #2d3748; margin-bottom: 12px">
            ğŸ“ ìƒì„¸ ì •ë³´
          </h3>
          <p
            style="color: #7a8a9e; font-size: 14px; line-height: 1.6; margin: 0"
          >
            {{ policy.content }}
          </p>
        </div>

        <div
          style="
            background: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 16px;
          "
        >
          <h3 style="font-size: 16px; color: #2d3748; margin-bottom: 12px">
            â„¹ï¸ ì¶”ê°€ ì •ë³´
          </h3>
          <div style="margin-bottom: 12px">
            <p style="font-size: 12px; color: #a0aec0; margin-bottom: 4px">
              ì‹ ì²­ ê°€ëŠ¥ ê¸°ê°„
            </p>
            <p style="font-size: 14px; color: #2d3748; margin: 0">
              {{ policy.apply_start_date }} ~ {{ policy.apply_end_date }}
            </p>
          </div>
          <div style="margin-bottom: 12px">
            <p style="font-size: 12px; color: #a0aec0; margin-bottom: 4px">
              ì •ë³´ ì¶œì²˜
            </p>
            <p style="font-size: 14px; color: #2d3748; margin: 0">
              {{ policy.source }}
            </p>
          </div>
          <div>
            <p style="font-size: 12px; color: #a0aec0; margin-bottom: 4px">
              ê³µì‹ í™ˆí˜ì´ì§€
            </p>
            <a
              href="{{ policy.homepage }}"
              target="_blank"
              style="font-size: 14px; color: #7ec4cf; text-decoration: none"
              >ë°”ë¡œê°€ê¸° (í´ë¦­)</a
            >
          </div>
        </div>
        {% else %}
        <div style="text-align: center; padding: 60px 20px">
          <div style="font-size: 48px; margin-bottom: 16px">ğŸ˜•</div>
          <h3 style="color: #2d3748; margin-bottom: 8px">
            ì •ì±…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
          </h3>
          <p style="color: #a0aec0; font-size: 14px">
            ì£¼ì†Œì°½ì˜ IDê°€ DBì— ìˆëŠ”ì§€ í™•ì¸í•´ ì£¼ì„¸ìš”.
          </p>
        </div>
        {% endif %}
      </div>
    </div>

    <div
      style="
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 16px 20px;
        background: white;
        border-top: 1px solid #e2e8f0;
        display: flex;
        gap: 12px;
        z-index: 1000;
      "
    >
      <div
        style="
          max-width: 480px;
          margin: 0 auto;
          width: 100%;
          display: flex;
          gap: 12px;
        "
      >
        <a
          href="/policy/apply/?id={{ policy.policy_id }}"
          class="btn-primary"
          style="
            flex: 1;
            text-align: center;
            display: block;
            text-decoration: none;
            background: #a8e6cf; /* ì‹œì•ˆì˜ ë¯¼íŠ¸ìƒ‰ */
            color: #2d3748;
            font-weight: bold;
          "
          >ğŸ“ ì‹ ì²­í•˜ê¸°</a
        >

        <a
          href="/policy/simulate/?id={{ policy.policy_id }}"
          class="btn-primary"
          style="
            flex: 1;
            text-align: center;
            display: block;
            text-decoration: none;
            background: #ffaaa5; /* ì‹œì•ˆì˜ ì½”ë„ìƒ‰ */
            color: white;
            font-weight: bold;
          "
          >ğŸ§ª ì‹œë®¬ë ˆì´ì…˜</a
        >
      </div>
    </div>

    <button class="floating-home" onclick="window.location.href = '/'">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
    </button>
  </body>
</html>
